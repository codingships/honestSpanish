---
import LegalLayout from '../../../layouts/LegalLayout.astro';

export function getStaticPaths() {
    return [
        { params: { lang: 'es' } },
        { params: { lang: 'en' } },
        { params: { lang: 'ru' } }
    ];
}

const { lang } = Astro.params;

const content = {
    es: {
        title: 'Política de Privacidad',
        description: 'Cómo tratamos tus datos personales',
        lastUpdated: 'Última actualización: 13 de enero de 2026',
    },
    en: {
        title: 'Privacy Policy',
        description: 'How we handle your personal data',
        lastUpdated: 'Last updated: January 13, 2026',
    },
    ru: {
        title: 'Политика конфиденциальности',
        description: 'Как мы обрабатываем ваши персональные данные',
        lastUpdated: 'Последнее обновление: 13 января 2026',
    },
};

const t = content[lang as keyof typeof content] || content.es;
---

<LegalLayout 
    title={t.title}
    description={t.description}
    lastUpdated={t.lastUpdated}
    lang={lang!}
>
    {lang === 'es' && (
        <>
            <h2>1. Responsable del tratamiento</h2>
            <ul>
                <li><strong>Identidad:</strong> [NOMBRE/RAZÓN SOCIAL]</li>
                <li><strong>NIF/CIF:</strong> [NÚMERO]</li>
                <li><strong>Dirección:</strong> [DIRECCIÓN], Madrid, España</li>
                <li><strong>Email:</strong> alejandro@espanolhonesto.com</li>
            </ul>

            <h2>2. Datos que recopilamos</h2>
            <p>Recopilamos los siguientes datos personales:</p>
            <ul>
                <li><strong>Datos de registro:</strong> Nombre, email, contraseña</li>
                <li><strong>Datos de pago:</strong> Procesados por Stripe (no almacenamos datos de tarjeta)</li>
                <li><strong>Datos de uso:</strong> Clases realizadas, progreso, notas de profesores</li>
                <li><strong>Datos técnicos:</strong> IP, navegador, cookies</li>
            </ul>

            <h2>3. Finalidad del tratamiento</h2>
            <ul>
                <li>Gestionar tu cuenta y suscripción</li>
                <li>Prestar los servicios de enseñanza contratados</li>
                <li>Enviarte comunicaciones relacionadas con el servicio</li>
                <li>Mejorar nuestros servicios</li>
            </ul>

            <h2>4. Base legal</h2>
            <ul>
                <li><strong>Ejecución del contrato:</strong> Para prestar los servicios contratados</li>
                <li><strong>Consentimiento:</strong> Para comunicaciones comerciales</li>
                <li><strong>Interés legítimo:</strong> Para mejora del servicio y seguridad</li>
            </ul>

            <h2>5. Destinatarios</h2>
            <p>Tus datos pueden ser comunicados a:</p>
            <ul>
                <li><strong>Stripe:</strong> Procesamiento de pagos (EE.UU.)</li>
                <li><strong>Supabase:</strong> Almacenamiento de datos (EE.UU.)</li>
                <li><strong>Google:</strong> Calendar, Drive, Meet (EE.UU.)</li>
                <li><strong>Resend:</strong> Envío de emails (EE.UU.)</li>
            </ul>

            <h2>6. Conservación de datos</h2>
            <ul>
                <li>Datos de cuenta: Mientras mantengas la cuenta activa + 5 años</li>
                <li>Datos fiscales: 5 años (obligación legal)</li>
                <li>Datos de clases: Mientras dure la relación + 2 años</li>
            </ul>

            <h2>7. Tus derechos</h2>
            <p>Puedes ejercer los siguientes derechos enviando un email a alejandro@espanolhonesto.com:</p>
            <ul>
                <li><strong>Acceso:</strong> Saber qué datos tenemos sobre ti</li>
                <li><strong>Rectificación:</strong> Corregir datos inexactos</li>
                <li><strong>Supresión:</strong> Eliminar tus datos ("derecho al olvido")</li>
                <li><strong>Oposición:</strong> Oponerte al tratamiento</li>
                <li><strong>Portabilidad:</strong> Recibir tus datos en formato estructurado</li>
                <li><strong>Limitación:</strong> Limitar el tratamiento en ciertos casos</li>
            </ul>
            <p>También puedes presentar una reclamación ante la <a href="https://www.aepd.es" target="_blank" rel="noopener">Agencia Española de Protección de Datos</a>.</p>

            <h2>8. Seguridad</h2>
            <p>Aplicamos medidas técnicas y organizativas para proteger tus datos: cifrado SSL/TLS, acceso restringido, copias de seguridad, etc.</p>
        </>
    )}

    {lang === 'en' && (
        <>
            <h2>1. Data Controller</h2>
            <ul>
                <li><strong>Identity:</strong> [NAME/COMPANY]</li>
                <li><strong>Tax ID:</strong> [NUMBER]</li>
                <li><strong>Address:</strong> [ADDRESS], Madrid, Spain</li>
                <li><strong>Email:</strong> alejandro@espanolhonesto.com</li>
            </ul>

            <h2>2. Data We Collect</h2>
            <ul>
                <li><strong>Registration data:</strong> Name, email, password</li>
                <li><strong>Payment data:</strong> Processed by Stripe (we don't store card data)</li>
                <li><strong>Usage data:</strong> Classes taken, progress, teacher notes</li>
                <li><strong>Technical data:</strong> IP, browser, cookies</li>
            </ul>

            <h2>3. Purpose</h2>
            <ul>
                <li>Manage your account and subscription</li>
                <li>Provide contracted teaching services</li>
                <li>Send service-related communications</li>
                <li>Improve our services</li>
            </ul>

            <h2>4. Legal Basis</h2>
            <ul>
                <li><strong>Contract execution:</strong> To provide contracted services</li>
                <li><strong>Consent:</strong> For commercial communications</li>
                <li><strong>Legitimate interest:</strong> For service improvement and security</li>
            </ul>

            <h2>5. Recipients</h2>
            <p>Your data may be shared with:</p>
            <ul>
                <li><strong>Stripe:</strong> Payment processing (USA)</li>
                <li><strong>Supabase:</strong> Data storage (USA)</li>
                <li><strong>Google:</strong> Calendar, Drive, Meet (USA)</li>
                <li><strong>Resend:</strong> Email sending (USA)</li>
            </ul>

            <h2>6. Your Rights</h2>
            <p>You can exercise your rights by emailing alejandro@espanolhonesto.com:</p>
            <ul>
                <li><strong>Access:</strong> Know what data we have about you</li>
                <li><strong>Rectification:</strong> Correct inaccurate data</li>
                <li><strong>Erasure:</strong> Delete your data</li>
                <li><strong>Objection:</strong> Object to processing</li>
                <li><strong>Portability:</strong> Receive your data in structured format</li>
            </ul>
        </>
    )}

    {lang === 'ru' && (
        <>
            <h2>1. Контролёр данных</h2>
            <ul>
                <li><strong>Идентификация:</strong> [ИМЯ/КОМПАНИЯ]</li>
                <li><strong>ИНН:</strong> [НОМЕР]</li>
                <li><strong>Адрес:</strong> [АДРЕС], Мадрид, Испания</li>
                <li><strong>Email:</strong> alejandro@espanolhonesto.com</li>
            </ul>

            <h2>2. Собираемые данные</h2>
            <ul>
                <li><strong>Регистрационные данные:</strong> Имя, email, пароль</li>
                <li><strong>Платёжные данные:</strong> Обрабатываются Stripe</li>
                <li><strong>Данные об использовании:</strong> Занятия, прогресс</li>
                <li><strong>Технические данные:</strong> IP, браузер, cookies</li>
            </ul>

            <h2>3. Цели обработки</h2>
            <ul>
                <li>Управление аккаунтом и подпиской</li>
                <li>Предоставление услуг обучения</li>
                <li>Отправка сервисных сообщений</li>
                <li>Улучшение услуг</li>
            </ul>

            <h2>4. Ваши права</h2>
            <p>Вы можете реализовать свои права, написав на alejandro@espanolhonesto.com:</p>
            <ul>
                <li><strong>Доступ:</strong> Узнать, какие данные мы храним</li>
                <li><strong>Исправление:</strong> Исправить неточные данные</li>
                <li><strong>Удаление:</strong> Удалить ваши данные</li>
                <li><strong>Возражение:</strong> Возразить против обработки</li>
            </ul>
        </>
    )}
</LegalLayout>
