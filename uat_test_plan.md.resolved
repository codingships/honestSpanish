# üß™ UAT Espa√±ol Honesto ‚Äî Gu√≠a Exhaustiva de Testing Manual

## Leyenda de Estados

| S√≠mbolo | Significado |
|:---:|:---|
| ‚¨ú | Pendiente (no probado a√∫n) |
| ‚úÖ | Pass (funciona como se esperaba) |
| ‚ùå | Fail (divergencia: no funciona como se esperaba) |
| ‚ö†Ô∏è | Parcial (funciona pero con matices o bugs cosm√©ticos) |

## Plantilla para registrar divergencias

Cuando marques **‚ùå** o **‚ö†Ô∏è**, copia esta plantilla y rell√©nala debajo de la tabla o en un doc aparte:

```
üêõ BUG #___
- Test ID: (ej. 2.2.C)
- Acci√≥n realizada: (qu√© hiciste exactamente)
- Resultado esperado: (qu√© deber√≠a haber pasado)
- Resultado real: (qu√© pas√≥ de verdad)
- Captura: (pega screenshot o URL)
- Severidad: BLOCKER / MAJOR / MINOR / COSMETIC
```

---

## üìã TABLA MAESTRA DE ACCIONES

### FASE 1: ONBOARDING Y SEGURIDAD

| ID | Acci√≥n Exacta | Rol | Resultado Esperado | Estado | Divergencia / Notas |
|:---|:---|:---:|:---|:---:|:---|
| 1.1.A | Ir a `/register`, rellenar email+password de alumno nuevo | Alumno | Se crea la cuenta, redirige a login o campus | ‚¨ú | |
| 1.1.B | Confirmar email v√≠a Magic Link (si aplica) | Alumno | El link funciona y activa la cuenta | ‚¨ú | |
| 1.1.C | Hacer login con las credenciales reci√©n creadas | Alumno | Entras al Dashboard `/campus`. Ves tu nombre | ‚¨ú | |
| 1.1.D | Verificar en Supabase que `profiles.role = 'student'` | DB | Fila existe con rol correcto | ‚¨ú | |
| 1.2.A | Siendo alumno, escribir manualmente `/campus/admin` en la URL | Alumno | Redirigido o error 403. NO ves el panel admin | ‚¨ú | |
| 1.2.B | Siendo alumno, escribir manualmente `/campus/teacher` en la URL | Alumno | Redirigido o error 403. NO ves el panel profe | ‚¨ú | |
| 1.3.A | Cerrar sesi√≥n, ir a login, pulsar "Olvid√© mi contrase√±a" | Alumno | Se muestra el formulario de email | ‚¨ú | |
| 1.3.B | Introducir email del alumno y enviar | Alumno | Toast/mensaje de "Email enviado" | ‚¨ú | |
| 1.3.C | Abrir el email recibido y pulsar el Magic Link | Alumno | Redirige a `/reset-password` | ‚¨ú | |
| 1.3.D | Escribir nueva contrase√±a y confirmar | Alumno | Mensaje de √©xito, redirige a login | ‚¨ú | |
| 1.3.E | Intentar login con la contrase√±a VIEJA | Alumno | Falla (credenciales incorrectas) | ‚¨ú | |
| 1.3.F | Intentar login con la contrase√±a NUEVA | Alumno | √âxito, entras al campus | ‚¨ú | |

---

### FASE 2: AGENDAMIENTO INDIVIDUAL DE CLASES

| ID | Acci√≥n Exacta | Rol | Resultado Esperado | Estado | Divergencia / Notas |
|:---|:---|:---:|:---|:---:|:---|
| 2.1.A | Ir al calendario del profesor, pulsar "Nueva Clase" | Admin | Se abre el modal de agendar | ‚¨ú | |
| 2.1.B | Seleccionar alumno de prueba, fecha ma√±ana 17:00, nivel A2 | Admin | Formulario acepta los datos | ‚¨ú | |
| 2.1.C | Confirmar la creaci√≥n | Admin | Toast verde de √©xito | ‚¨ú | |
| 2.1.D | Verificar que la clase aparece en el calendario de la plataforma | Admin | Evento visible en el d√≠a correcto | ‚¨ú | |
| 2.1.E | Verificar en Google Calendar del profesor | GCal | Evento creado con hora correcta y link Meet | ‚¨ú | |
| 2.1.F | Verificar en Google Drive del alumno | GDrive | Google Doc generado en la carpeta del nivel | ‚¨ú | |
| 2.1.G | Verificar en Supabase tabla `sessions` | DB | Fila insertada, status=`scheduled`, calendar_event_id relleno | ‚¨ú | |
| 2.2.A | Crear evento MANUAL en Google Calendar del profe a las 19:00 ma√±ana | GCal | Evento creado como "Ocupado" | ‚¨ú | |
| 2.2.B | Intentar agendar clase con alumno ma√±ana 19:00 desde la plataforma | Admin | Error: "El profesor ya tiene un evento" (bloqueo) | ‚¨ú | |
| 2.2.C | Verificar en Supabase que NO se cre√≥ la sesi√≥n | DB | No hay fila nueva en `sessions` | ‚¨ú | |
| 2.2.D | Intentar agendar a las 20:00 (hora libre) | Admin | Se crea correctamente (sin conflicto) | ‚¨ú | |

---

### FASE 3: AGENDAMIENTO MASIVO (Bulk Scheduler)

| ID | Acci√≥n Exacta | Rol | Resultado Esperado | Estado | Divergencia / Notas |
|:---|:---|:---:|:---|:---:|:---|
| 3.1.A | Pulsar "Agendar Curso Completo" en el panel del profesor | Admin | Se abre el modal masivo | ‚¨ú | |
| 3.1.B | Seleccionar alumno, nivel B1, d√≠a Mi√©rcoles, hora 10:00, total: 10 clases | Admin | Formulario acepta los datos | ‚¨ú | |
| 3.1.C | Verificar la vista previa: debe mostrar exactamente 10 fechas separadas por 7 d√≠as | Admin | Lista de 10 fechas correctas | ‚¨ú | |
| 3.2.A | Deseleccionar/borrar la fecha n¬∫4 y la n¬∫7 (simulando festivos) | Admin | Quedan 8 fechas visibles | ‚¨ú | |
| 3.2.B | Confirmar el agendamiento masivo | Admin | Loading ‚Üí Toast de √©xito | ‚¨ú | |
| 3.2.C | Verificar en Google Calendar del profesor | GCal | 8 eventos nuevos (no 10) con Meet links | ‚¨ú | |
| 3.2.D | Verificar en Google Drive del alumno | GDrive | 8 Google Docs generados en carpeta B1 | ‚¨ú | |
| 3.2.E | Verificar en Supabase tabla `sessions` | DB | 8 filas nuevas con status `scheduled` | ‚¨ú | |
| 3.3.A | *(Caso borde)* Intentar agendar masivo en horario donde ya hay 1 conflicto en GCal | Admin | El sistema rechaza ESA fecha concreta pero s√≠ crea las dem√°s, o rechaza todo (verificar comportamiento) | ‚¨ú | |

---

### FASE 4: EXPERIENCIA DEL ESTUDIANTE (Timezones + UI)

| ID | Acci√≥n Exacta | Rol | Resultado Esperado | Estado | Divergencia / Notas |
|:---|:---|:---:|:---|:---:|:---|
| 4.1.A | (Con tu PC en hora de Espa√±a) Login como alumno, ver [NextClassCard](file:///c:/Users/Alin/Desktop/Academia/pruebas/src/components/calendar/NextClassCard.tsx#32-171) | Alumno | La hora de la clase se muestra en hora espa√±ola | ‚¨ú | |
| 4.1.B | Cambiar zona horaria del PC a "Nueva York (UTC-5)" | Sistema | Hora del PC cambiada | ‚¨ú | |
| 4.1.C | Refrescar la p√°gina del campus del alumno | Alumno | La hora de la clase ahora muestra 6h menos (ej. 10:00‚Üí04:00) | ‚¨ú | |
| 4.1.D | Verificar que NO hay parpadeo ("flash") al cargar la hora | Alumno | La hora aparece directamente bien, sin saltar de una a otra | ‚¨ú | |
| 4.1.E | Restaurar zona horaria del PC a Espa√±a | Sistema | Hora restaurada | ‚¨ú | |
| 4.2.A | Ver una clase programada para dentro de 3 d√≠as | Alumno | Bot√≥n "Join Meet" NO visible o deshabilitado. Timer dice "en 3 d√≠as" | ‚¨ú | |
| 4.2.B | (Opcional) Agendar clase para dentro de 10 minutos y refrescar | Alumno | Bot√≥n "Join Meet" ACTIVO y visible (verde/iluminado) | ‚¨ú | |
| 4.3.A | Ir a la pesta√±a "Pr√≥ximas" en la lista de clases | Alumno | Se muestran todas las clases futuras ordenadas por fecha | ‚¨ú | |
| 4.3.B | Ir a la pesta√±a "Pasadas" en la lista de clases | Alumno | Se muestran las clases pasadas (si las hay) | ‚¨ú | |
| 4.3.C | Verificar que las fechas/horas en "Pasadas" tambi√©n son zona local | Alumno | Horas coherentes con la zona del alumno | ‚¨ú | |

---

### FASE 5: CANCELACIONES Y NO-SHOWS

| ID | Acci√≥n Exacta | Rol | Resultado Esperado | Estado | Divergencia / Notas |
|:---|:---|:---:|:---|:---:|:---|
| 5.1.A | Como alumno, seleccionar clase de dentro de >24h, pulsar "Cancelar" | Alumno | Se abre modal de cancelaci√≥n con campo de motivo | ‚¨ú | |
| 5.1.B | Escribir motivo y confirmar cancelaci√≥n | Alumno | Toast √©xito, clase pasa a "Pasadas" como `cancelled` | ‚¨ú | |
| 5.1.C | Verificar en Google Calendar del profesor | GCal | El evento fue eliminado/cancelado | ‚¨ú | |
| 5.1.D | Verificar en Supabase que `sessions.status = 'cancelled'` | DB | Status actualizado correctamente | ‚¨ú | |
| 5.1.E | Verificar que se envi√≥ email de cancelaci√≥n al profesor | Email | El profesor recibe la notificaci√≥n por email | ‚¨ú | |
| 5.2.A | Como alumno, seleccionar clase de dentro de <24h (ej. en 3 horas) | Alumno | El bot√≥n "Cancelar" est√° desactivado o no existe | ‚¨ú | |
| 5.2.B | Verificar el mensaje explicativo | Alumno | Texto tipo "cancelaci√≥n no disponible con menos de 24h" | ‚¨ú | |
| 5.3.A | Como profesor, abrir una clase pasada donde el alumno no se present√≥ | Profesor | Modal de detalle se abre | ‚¨ú | |
| 5.3.B | Pulsar "Marcar como No Presentado" | Profesor | Toast √©xito, clase pasa a no_show | ‚¨ú | |
| 5.3.C | Verificar en Supabase que `sessions.status = 'no_show'` | DB | Status actualizado | ‚¨ú | |

---

### FASE 6: COMPLETAR CLASE + REPORTE + DEBERES A GOOGLE DOCS

| ID | Acci√≥n Exacta | Rol | Resultado Esperado | Estado | Divergencia / Notas |
|:---|:---|:---:|:---|:---:|:---|
| 6.1.A | Como profesor, abrir una clase pasada (que ya ocurri√≥) | Profesor | Modal de detalle se abre | ‚¨ú | |
| 6.1.B | Pulsar "Completar Clase" | Profesor | Se abre el modal PostClassReport (NO se completa directamente) | ‚¨ú | |
| 6.1.C | Intentar enviar sin seleccionar estrellas | Profesor | Error: "Please provide a rating" ‚Üí bloqueado | ‚¨ú | |
| 6.2.A | Seleccionar 4 estrellas | Profesor | 4 estrellas amarillas iluminadas | ‚¨ú | |
| 6.2.B | Marcar skills: Grammar=Good, Vocabulary=Excellent, Fluency=Needs Work, Pronunciation=Good | Profesor | Los radio buttons reflejan la selecci√≥n | ‚¨ú | |
| 6.2.C | Escribir en Comentarios: "Mejorar verbos irregulares" | Profesor | Texto aceptado en el textarea | ‚¨ú | |
| 6.2.D | Escribir en Deberes: "Escribe 10 frases usando subjuntivo" | Profesor | Texto aceptado en el textarea de deberes | ‚¨ú | |
| 6.2.E | Pulsar "Enviar Reporte y Completar Clase" | Profesor | Loading spinner ‚Üí Toast de √©xito ‚Üí Modal se cierra | ‚¨ú | |
| 6.3.A | Verificar en Supabase: `sessions.status = 'completed'` | DB | Status cambiado | ‚¨ú | |
| 6.3.B | Verificar en Supabase: `sessions.post_class_report` contiene JSON con rating=4, skills, comments | DB | JSON correcto almacenado | ‚¨ú | |
| 6.3.C | Verificar en Supabase: `sessions.post_class_report.homework_text` contiene el texto de deberes | DB | Texto de deberes almacenado | ‚¨ú | |
| 6.4.A | Abrir el Google Doc de esa clase (desde Drive o desde la URL guardada) | GDrive | El documento se abre | ‚¨ú | |
| 6.4.B | Bajar al **final** del documento | GDrive | Aparece separador "--- Deberes de la clase del DD/MM/YYYY ---" | ‚¨ú | |
| 6.4.C | Verificar que el texto de los deberes ("Escribe 10 frases...") est√° inyectado | GDrive | Texto exacto presente al final del doc | ‚¨ú | |
| 6.5.A | *(Caso borde)* Completar clase SIN escribir deberes (dejar textarea vac√≠o) | Profesor | Se completa normalmente sin intentar inyectar nada en el Doc | ‚¨ú | |
| 6.5.B | Verificar que el Google Doc no tiene basura inyectada | GDrive | Doc intacto, sin "--- Deberes ---" vac√≠o | ‚¨ú | |

---

## üìä Resumen Final

| Fase | Total Tests | ‚úÖ Pass | ‚ùå Fail | ‚ö†Ô∏è Parcial | % Completado |
|:---|:---:|:---:|:---:|:---:|:---:|
| 1. Onboarding y Seguridad | 12 | | | | |
| 2. Agendamiento Individual | 11 | | | | |
| 3. Agendamiento Masivo | 9 | | | | |
| 4. Experiencia Estudiante | 10 | | | | |
| 5. Cancelaciones y No-Shows | 10 | | | | |
| 6. Completar + Reporte + Drive | 15 | | | | |
| **TOTAL** | **67** | | | | |

> **Criterio de Lanzamiento:** Para considerar esta fase lista para producci√≥n, el **90%+ de los tests deben ser ‚úÖ**, con **0 ‚ùå en tests marcados como BLOCKER** en el registro de bugs.
